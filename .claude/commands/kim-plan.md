---
description: Kim需求拆解命令 - 把大需求拆解为可执行的任务列表，含依赖和优先级
allowed-tools: Read, Write, Edit, Bash, Glob, Grep
argument-hint: [需求描述]
---

# Kim需求拆解命令

> 把模糊的大需求拆解为清晰的任务列表，含子任务、依赖关系、执行顺序

你现在要拆解这个需求：$ARGUMENTS

**适用场景**：产品经理给了一个大需求，不知道从哪开始？用这个命令！

## 执行流程

### 阶段1：需求理解与澄清

首先分析用户的需求，识别：
- **核心目标**：用户到底想要什么？
- **隐含需求**：没说但应该有的功能
- **技术约束**：框架、语言、性能要求
- **边界条件**：什么不需要做

如果需求不够清晰，提出澄清问题：
```
🤔 需要澄清几个问题：

1. 用户认证方式：JWT还是Session？
2. 数据库选型：MySQL还是PostgreSQL？
3. 是否需要前端页面？
```

### 阶段2：任务拆解

将需求拆解为可执行的任务列表。

**拆解原则**：
- 每个任务2-4小时可完成
- 每个任务有明确的输入和输出
- 任务之间依赖关系清晰
- 优先级按照"先基础后上层"排列

**输出格式**：
```markdown
## 📋 任务列表

### 🔴 P0 - 基础设施（必须先完成）

#### 任务1：数据库模型设计
- **描述**：设计User表结构，包含必要字段
- **输入**：需求文档
- **输出**：models.py文件
- **预计时间**：2小时
- **依赖**：无
- **执行命令**：`/kim-code "设计User模型，字段包括..."`

#### 任务2：数据库迁移
- **描述**：创建数据库迁移文件并执行
- **输入**：models.py
- **输出**：migration文件
- **预计时间**：30分钟
- **依赖**：任务1

### 🟡 P1 - 核心功能

#### 任务3：用户注册API
- **描述**：实现注册接口，含参数校验
- **输入**：User模型
- **输出**：/api/register端点
- **预计时间**：3小时
- **依赖**：任务1、任务2
- **执行命令**：`/kim-api "用户注册接口，参数..."`

#### 任务4：用户登录API
- **描述**：实现登录接口，返回JWT
- **输入**：User模型
- **输出**：/api/login端点
- **预计时间**：3小时
- **依赖**：任务3

### 🟢 P2 - 增强功能

#### 任务5：密码重置
- **描述**：实现密码重置流程
- **输入**：邮件服务配置
- **输出**：/api/reset-password端点
- **预计时间**：4小时
- **依赖**：任务4

---

## 📊 任务依赖图

\`\`\`
任务1 ──→ 任务2 ──→ 任务3 ──→ 任务4 ──→ 任务5
(模型)    (迁移)    (注册)    (登录)    (重置)
\`\`\`

## ⏱️ 时间估算

| 优先级 | 任务数 | 总时间 |
|--------|--------|--------|
| P0 | 2个 | 2.5小时 |
| P1 | 2个 | 6小时 |
| P2 | 1个 | 4小时 |
| **总计** | **5个** | **12.5小时** |

## 🚀 执行建议

1. **第一天**：完成P0任务（基础设施）
2. **第二天**：完成P1任务（核心功能）
3. **第三天**：完成P2任务（增强功能）+ 测试

## 📝 下一步

准备好开始了吗？运行以下命令：
\`\`\`bash
/kim-code "任务1的描述"
\`\`\`
```

---

## 使用示例

```bash
# 功能需求
/kim-plan "实现用户认证系统，包括注册、登录、忘记密码"

# 系统设计
/kim-plan "设计RBAC权限系统"

# 重构任务
/kim-plan "把单体应用拆成微服务"

# 模糊需求
/kim-plan "优化系统性能"
```

---

## 适用场景

✅ **适合使用 /kim-plan**：
- 收到大需求，不知道从哪开始
- 需要给领导汇报工作计划
- 多人协作需要分工
- 想要有序推进而不是瞎搞

❌ **不需要 /kim-plan**：
- 任务已经很清晰 → 直接 `/kim-code`
- 只是简单修改 → 直接对话即可
- 只需要审查 → `/kim-review`
